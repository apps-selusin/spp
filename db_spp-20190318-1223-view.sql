CREATE VIEW `v0101_daftarsiswamasterdetail`  AS  select `dsm`.`id` AS `id`,`dsm`.`tahunajaran_id` AS `tahunajaran_id`,`dsm`.`sekolah_id` AS `sekolah_id`,`dsm`.`kelas_id` AS `kelas_id`,`dsd`.`siswa_id` AS `siswa_id` from (`t0104_daftarsiswamaster` `dsm` left join `t0105_daftarsiswadetail` `dsd` on((`dsm`.`id` = `dsd`.`daftarsiswamaster_id`))) ;
CREATE VIEW `v0301_bayarmasterdetail`  AS  select `a`.`id` AS `bayarmaster_id`,`a`.`tahunajaran_id` AS `tahunajaran_id`,`a`.`siswa_id` AS `siswa_id`,`a`.`Nomor` AS `Nomor`,`a`.`Tanggal` AS `Tanggal`,`a`.`Total` AS `Total`,`b`.`id` AS `bayardetail_id`,`b`.`iuran_id` AS `iuran_id`,`b`.`Periode1` AS `Periode1`,`b`.`Periode2` AS `Periode2`,`b`.`Keterangan` AS `Keterangan`,`b`.`Jumlah` AS `Jumlah` from (`t0301_bayarmaster` `a` left join `t0302_bayardetail` `b` on((`a`.`id` = `b`.`bayarmaster_id`))) ;
CREATE VIEW `v0302_potensi`  AS  select `ds`.`id` AS `ds_id`,`ta`.`id` AS `ta_id`,`ta`.`TahunAjaran` AS `TahunAjaran`,`s`.`id` AS `s_id`,`s`.`Sekolah` AS `Sekolah`,`k`.`id` AS `k_id`,`k`.`Kelas` AS `Kelas`,`dsd`.`id` AS `dsd_id`,`dsd`.`siswa_id` AS `siswa_id`,`ssw`.`NIS` AS `NIS`,`ssw`.`Nama` AS `Nama`,`sswiur`.`id` AS `sswiur_id`,`sswiur`.`iuran_id` AS `iuran_id`,`iur`.`Iuran` AS `Iuran`,`iur`.`Jenis` AS `Jenis`,`sswiur`.`Nilai` AS `Nilai`,(case when (`iur`.`Jenis` = 'Rutin') then (`sswiur`.`Nilai` * 12) else `sswiur`.`Nilai` end) AS `Jumlah`,(case when (`iur`.`Jenis` = 'Rutin') then ((((((((((((if((`sswiur`.`P01` = '0'),0,1) + if((`sswiur`.`P02` = '0'),0,1)) + if((`sswiur`.`P03` = '0'),0,1)) + if((`sswiur`.`P04` = '0'),0,1)) + if((`sswiur`.`P05` = '0'),0,1)) + if((`sswiur`.`P06` = '0'),0,1)) + if((`sswiur`.`P07` = '0'),0,1)) + if((`sswiur`.`P08` = '0'),0,1)) + if((`sswiur`.`P09` = '0'),0,1)) + if((`sswiur`.`P10` = '0'),0,1)) + if((`sswiur`.`P11` = '0'),0,1)) + if((`sswiur`.`P12` = '0'),0,1)) * `sswiur`.`Nilai`) else `sswiur`.`Terbayar` end) AS `Terbayar`,((case when (`iur`.`Jenis` = 'Rutin') then (`sswiur`.`Nilai` * 12) else `sswiur`.`Nilai` end) - (case when (`iur`.`Jenis` = 'Rutin') then ((((((((((((if((`sswiur`.`P01` = '0'),0,1) + if((`sswiur`.`P02` = '0'),0,1)) + if((`sswiur`.`P03` = '0'),0,1)) + if((`sswiur`.`P04` = '0'),0,1)) + if((`sswiur`.`P05` = '0'),0,1)) + if((`sswiur`.`P06` = '0'),0,1)) + if((`sswiur`.`P07` = '0'),0,1)) + if((`sswiur`.`P08` = '0'),0,1)) + if((`sswiur`.`P09` = '0'),0,1)) + if((`sswiur`.`P10` = '0'),0,1)) + if((`sswiur`.`P11` = '0'),0,1)) + if((`sswiur`.`P12` = '0'),0,1)) * `sswiur`.`Nilai`) else `sswiur`.`Terbayar` end)) AS `Sisa` from (((((((`t0104_daftarsiswamaster` `ds` left join `t0101_tahunajaran` `ta` on((`ds`.`tahunajaran_id` = `ta`.`id`))) left join `t0102_sekolah` `s` on((`ds`.`sekolah_id` = `s`.`id`))) left join `t0103_kelas` `k` on((`ds`.`kelas_id` = `k`.`id`))) left join `t0105_daftarsiswadetail` `dsd` on((`ds`.`id` = `dsd`.`daftarsiswamaster_id`))) left join `t0201_siswa` `ssw` on((`dsd`.`siswa_id` = `ssw`.`id`))) left join `t0202_siswaiuran` `sswiur` on(((`ssw`.`id` = `sswiur`.`siswa_id`) and (`ta`.`id` = `sswiur`.`tahunajaran_id`)))) left join `t0106_iuran` `iur` on((`sswiur`.`iuran_id` = `iur`.`id`))) ;
CREATE VIEW `v0303_potensi`  AS  select `v0302_potensi`.`TahunAjaran` AS `tahunajaran`,`v0302_potensi`.`Sekolah` AS `sekolah`,`v0302_potensi`.`Kelas` AS `kelas`,`v0302_potensi`.`NIS` AS `nis`,`v0302_potensi`.`Nama` AS `nama`,`v0302_potensi`.`Iuran` AS `iuran`,sum(`v0302_potensi`.`Jumlah`) AS `jumlah`,sum(`v0302_potensi`.`Terbayar`) AS `terbayar`,sum(`v0302_potensi`.`Sisa`) AS `sisa` from `v0302_potensi` group by `v0302_potensi`.`ta_id`,`v0302_potensi`.`s_id`,`v0302_potensi`.`k_id`,`v0302_potensi`.`siswa_id` ;
CREATE VIEW `v0304_potensi`  AS  select `i`.`id` AS `iuran_id`,`i`.`Iuran` AS `Iuran`,`i`.`Jenis` AS `Jenis`,`si`.`tahunajaran_id` AS `tahunajaran_id`,`ta`.`TahunAjaran` AS `TahunAjaran`,`dsm`.`sekolah_id` AS `sekolah_id`,`sklh`.`Sekolah` AS `Sekolah`,`dsm`.`kelas_id` AS `kelas_id`,`kls`.`Kelas` AS `Kelas`,if((`i`.`Jenis` = 'Rutin'),(`si`.`Nilai` * 12),`si`.`Nilai`) AS `Potensi`,if((`i`.`Jenis` = 'Rutin'),((((((((((((if((`si`.`P01` = '0'),0,1) + if((`si`.`P02` = '0'),0,1)) + if((`si`.`P03` = '0'),0,1)) + if((`si`.`P04` = '0'),0,1)) + if((`si`.`P05` = '0'),0,1)) + if((`si`.`P06` = '0'),0,1)) + if((`si`.`P07` = '0'),0,1)) + if((`si`.`P08` = '0'),0,1)) + if((`si`.`P09` = '0'),0,1)) + if((`si`.`P10` = '0'),0,1)) + if((`si`.`P11` = '0'),0,1)) + if((`si`.`P12` = '0'),0,1)) * `si`.`Nilai`),`si`.`Terbayar`) AS `Terbayar`,(if((`i`.`Jenis` = 'Rutin'),(`si`.`Nilai` * 12),`si`.`Nilai`) - if((`i`.`Jenis` = 'Rutin'),((((((((((((if((`si`.`P01` = '0'),0,1) + if((`si`.`P02` = '0'),0,1)) + if((`si`.`P03` = '0'),0,1)) + if((`si`.`P04` = '0'),0,1)) + if((`si`.`P05` = '0'),0,1)) + if((`si`.`P06` = '0'),0,1)) + if((`si`.`P07` = '0'),0,1)) + if((`si`.`P08` = '0'),0,1)) + if((`si`.`P09` = '0'),0,1)) + if((`si`.`P10` = '0'),0,1)) + if((`si`.`P11` = '0'),0,1)) + if((`si`.`P12` = '0'),0,1)) * `si`.`Nilai`),`si`.`Terbayar`)) AS `Sisa` from ((((((`t0106_iuran` `i` left join `t0202_siswaiuran` `si` on((`i`.`id` = `si`.`iuran_id`))) left join `t0101_tahunajaran` `ta` on((`si`.`tahunajaran_id` = `ta`.`id`))) left join `t0105_daftarsiswadetail` `dsd` on((`si`.`siswa_id` = `dsd`.`siswa_id`))) left join `t0104_daftarsiswamaster` `dsm` on((`dsd`.`daftarsiswamaster_id` = `dsm`.`id`))) left join `t0102_sekolah` `sklh` on((`dsm`.`sekolah_id` = `sklh`.`id`))) left join `t0103_kelas` `kls` on((`dsm`.`kelas_id` = `kls`.`id`))) ;
CREATE VIEW `v0305_potensi`  AS  select `v0304_potensi`.`Iuran` AS `iuran`,`v0304_potensi`.`Jenis` AS `jenis`,`v0304_potensi`.`TahunAjaran` AS `tahunajaran`,`v0304_potensi`.`Sekolah` AS `sekolah`,`v0304_potensi`.`Kelas` AS `kelas`,sum(`v0304_potensi`.`Potensi`) AS `potensi`,sum(`v0304_potensi`.`Terbayar`) AS `terbayar`,sum(`v0304_potensi`.`Sisa`) AS `sisa` from `v0304_potensi` group by `v0304_potensi`.`Iuran` ;
CREATE VIEW `v0306_pembayaran`  AS  select `ta`.`TahunAjaran` AS `TahunAjaran`,`sklh`.`Sekolah` AS `Sekolah`,`kls`.`Kelas` AS `Kelas`,`ssw`.`NIS` AS `NIS`,`ssw`.`Nama` AS `Nama`,`iur`.`Iuran` AS `Iuran`,`iur`.`Jenis` AS `Jenis`,`byr`.`Nomor` AS `Nomor`,`byr`.`Tanggal` AS `Tanggal`,`byr`.`Periode1` AS `Periode1`,`byr`.`Periode2` AS `Periode2`,`byr`.`Jumlah` AS `Jumlah` from ((((((`v0301_bayarmasterdetail` `byr` left join `v0101_daftarsiswamasterdetail` `dft` on(((`byr`.`tahunajaran_id` = `dft`.`tahunajaran_id`) and (`byr`.`siswa_id` = `dft`.`siswa_id`)))) left join `t0101_tahunajaran` `ta` on((`byr`.`tahunajaran_id` = `ta`.`id`))) left join `t0102_sekolah` `sklh` on((`dft`.`sekolah_id` = `sklh`.`id`))) left join `t0103_kelas` `kls` on((`dft`.`kelas_id` = `kls`.`id`))) left join `t0201_siswa` `ssw` on((`byr`.`siswa_id` = `ssw`.`id`))) left join `t0106_iuran` `iur` on((`byr`.`iuran_id` = `iur`.`id`))) ;
